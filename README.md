# Cataclysmic Catalog #

[![Build Status](https://img.shields.io/travis/astrocatalogs/supernovae.svg)](https://travis-ci.org/astrocatalogs/supernovae)
[![Coverage Status](https://coveralls.io/repos/github/astrocatalogs/supernovae/badge.svg?branch=master)](https://coveralls.io/github/astrocatalogs/supernovae?branch=master)
[![Python Version](https://img.shields.io/badge/python-3.4%2C%203.5-blue.svg)](https://www.python.org)
[![ArXiv Paper](https://img.shields.io/badge/arXiv-1605.01054-green.svg?style=flat)](http://arxiv.org/abs/1605.01054)

This is the primary repository for the  (OSC), a module for the [AstroCats](https://github.com/astrocatalogs/astrocats) catalog generation package. This repository also contains the [primary JSON catalog file](https://github.com/astrocatalogs/supernovae/blob/master/output/catalog.json) generated by AstroCats, which is used to drive the web-based table available on [sne.space](https://sne.space). Because GitHub repositories are limited to 1GB each, individual event JSON files are stored in separate repositories that are collated by year; these repositories contain the entirety of the data collected by the OSC:

https://github.com/astrocatalogs/sne-pre-1990 – Supernovae discovered before 1990.
https://github.com/astrocatalogs/sne-1990-1999 – Supernovae discovered between 1990 and 1999.
https://github.com/astrocatalogs/sne-2000-2004 – Supernovae discovered between 2000 and 2004.
https://github.com/astrocatalogs/sne-2005-2009 – Supernovae discovered between 2005 and 2009.
https://github.com/astrocatalogs/sne-2010-2014 – Supernovae discovered between 2010 and 2014.
https://github.com/astrocatalogs/sne-2015-2019 – Supernovae discovered between 2015 and the present.

## Contributing Data ##

To contribute data to the repository, please read our [contribution guide](https://sne.space/contribute/).

## Format of Data Files ##

The data files are in [JSON format](http://www.json.org/), a detailed description of the particular structure we have chosen is available [here](https://github.com/astrocatalogs/supernovae/blob/master/SCHEMA.md).

## Installing and Running CV Import Script ##

If you are interested in reproducing the catalog on your own machine, you must first install AstroCats and its dependencies, and then install this repository into the astrocats directory

```shell
conda install matplotlib scipy
pip install -r requirements.txt
git clone https://github.com/astrocatalogs/astrocats.git
cd astrocats/astrocats
git clone https://github.com/astrocatalogs/supernovae.git
```

The OSC software is run in Python 3.4+ and is not tested for compatability with Python 2. After installing, navigate to the `astrocats` directory and execute the import script,

```shell
cd ..
python -m astrocats supernovae import
```

and the import process will begin. The first time you run the import may take over a day as the caches of many sources will need to be built from scratch (particularly collecting spectra from WISeREP); after the initial run the typical run time for the import is a few hours, and in update mode (`python -m astrocats supernovae import -u`), typical runtime is less than an hour. Runtime can be reduced significantly by selecting only specific tasks to run (below we just run the `internal` task),

```shell
python -m astrocats supernovae import --tasks internal
```

with the cheapest tasks typically appearing near the top of the [tasks.json](https://github.com/astrocatalogs/supernovae/blob/master/input/tasks.json) file. The above example should take less than a minute to execute.

## Using the Collected OSC Data ##

There are several scripts in the [scripts](https://github.com/astrocatalogs/supernovae/blob/master/scripts) folders (both in this module and in the [scripts](https://github.com/astrocatalogs/astrocats/blob/master/scripts) folder of the main AstroCats module) that use the produced datafiles to generate various data products, print out metrics, etc. These are standalone scripts that can be invoked in the following way,

```shell
python -m astrocats.scripts.webcat -c sne
```

where above we run the script that generates the web-based supernova catalog. Some scripts are specific to the supernova module and are available within that directory, and can be invoked as follows

```shell
python -m astrocats.supernovae.scripts.histograms
```
# cataclysmic
Constructed by Ryan Jackim

First run the import function described below to gather data from all the catalogues. If you want to know what catalogues are being called, in the cataclysmic folder, there is a folder called inputs. In inputs there is a folder called tasks.json That is where the catalog list is located. The code is outdated and work needs to be done to make sure this works properly.

```shell
python -m astrocats cataclysmic import
```

If you wish to add a catalog, you must first add an entry in cataclysmic/tasks folder. You will have to make a way of importing the data in yourself but the key functions you will need to add to the list is: catalog.entries[name].add_quantity( 

Look at other files as examples on how to create your own task. After the tasks have been created, you will need to add your new catalog to the tasks file in cataclysmic/input/tasks.json

Some necessary folders do not exist in the original git hub version and you will need to create them. Examples are, cataclysmic/input/cv-external, and cataclysmic/output/cv-2004-1991 and cataclysmic/output/cv-pre-1990

After the import function is created, you will need to use the scripts to develop the cataloge. These scripts are located outside the cataclysmic folder in a folder titled scripts. However, there are scripts specific to each individual catalog within the cataclysmic folder, cataclysmic/scripts. cataclysmic/scripts/generate-web.sh Will run the generation process, but some edits may need to be in order to prevent catalogue spcific scripts from running on the wrong catalog. The following script generates a test of the catalog in a json file.

```shell
python -m astrocats.cataclysmic.scripts.webcat -c cv -te
```
The above script will output a json catalog in cataclysmic/output/catalog.json.test If you are making your own catalog, you must add in the attribute of your catalogue at the end of -c into each of the python script folders listed to be run in cataclysmic/scripts/generate-web.sh under the lines that say elif args.catalog == 'sne':, copy the existing examples and adjust them to fit your catalog.

Code is extremely out of date, expect compatability issues